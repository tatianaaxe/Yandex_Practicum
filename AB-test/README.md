# Проект по А/B-тестированию новой платежной воронки (recommender_system_test)

**Цель исследования:**

- Оценить корректность проведения теста
- Проанализировать результаты теста
  
**Техническое задание**  
Название теста: recommender_system_test;  
Группы: А (контрольная), B (новая платёжная воронка);  
Дата запуска: 2020-12-07;  
Дата остановки набора новых пользователей: 2020-12-21;  
Дата остановки: 2021-01-04;  
Ожидаемое количество участников теста: 15% новых пользователей из региона EU;  
Назначение теста: тестирование изменений, связанных с внедрением улучшенной рекомендательной системы;  
Ожидаемый эффект: за 14 дней с момента регистрации в системе пользователи покажут улучшение каждой метрики не менее, чем на 5 процентных пунктов:  
конверсии в просмотр карточек товаров — событие product_page  
просмотры корзины — product_cart  
покупки — purchase.  
Загрузите данные теста, проверьте корректность его проведения и проанализируйте полученные результаты.

## Общий вывод

1. Проведена предобработка данных:  
- значения с датами преобразованы в формат datetime  
- дубликаты не обнаружены.
- пропуски в details по таблице с событиями зависят от покупки и заполняются дополнительно, искусственно заполнять нельзя.  

2. АБ тест был проведен с нарушениями ТЗ:  

- Есть 1602 клиента, попавших сразу в 2 теста.   
- Пользователи в группах распределены неравномерно: группе A =  3824, в группе B =  2877.  
- Конечная дата событий не соответствует ТЗ - вместо 04.01.21 последнее событие произошло 30.12.2020.
- Чтобы иметь возможность совершать действия 14 дней после регистрации, она должна произойти не позже 21 декабря. Таких дат регистрации в датафрейме не обнаружены. Однако не все пользователи из тестовой группы дошли до финальной даты: те, что зарегистрировались с 17 декабря, не имели возможности совершать действия все 14 дней из-за фактического прекращения действий 30 декабря, и их лайфтайм сократился до 9-13 дней.  


3. Исходя из результатов АВ тестирования и их статистической проверки, ожидаемый эффект в изменении конверсии достигнут не был:   
- По переходу на карточку товара наблюдается снижение метрики на 9 пп (с 65% до 56%).  
- В покупку конвертировалось 32% клиентов из группы А и 28% из группы В.  
- 46% от перешедших в карточку товара пользователей переходит в корзину в группе А и 49% - в группе В. Целевой показатель улучшения на 3пп не достигнут.  
Воронка нарушена из-за возможности оплаты товара, минуя корзину. В группе А оплативших заказ больше, чем перешедших в корзину, в группе В - примерно одинаково.   

- По результатам статистических проверок видно, что есть значимые различия долей клиентов между группами А и В по событию перехода в карточку товара. Если не пользоваться поправкой Бонферрони, при статистической значимости, равной 5%, также можно будет предполагать различия долей между группами по событию покупки. 

4. Рекомендации для проведения АB-тестов:

- добавлять вторую контрольную группу (ААВ тест)  
- не проверять на этих пользователях параллельные гипотезы  
- не проводить тесты в период сезонных активностей (Рождество/Новый год, Черная Пятница)  
- разбивать группы равномерно по количеству и проверять это статистическими методами    
- проверять лайфтайм в тесте попавших в выборку новых пользователей  

5. Баг-репорт:  
- проверить, почему нет данных по пользователям с 30 декабря 2020 г.  
  

6. Рекомендации по платежной воронке зависят от теста:  

   Если он был направлен на то, чтобы пользователи переходили в корзину и там "добрали" товары, можно добавить те же самые рекомендации в конце прокрутки основного экрана. Тогда клиент не уйдет так быстро, оплатив моментально нужный товар и выйдя из приложения.  
   
   Если важнее сделать удобней оплату, чтобы клиент быстрее решился на покупку, нужно на фронте явно показать, какие есть выгодные способы оплаты: сплит/рассрочка, СБП со скидкой, выгодный кэшбек.
